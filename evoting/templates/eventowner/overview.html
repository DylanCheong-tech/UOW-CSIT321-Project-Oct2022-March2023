<!-- overview.html -->

{% extends "eventowner/homepage_base.html" %}
{% load static %}
{% load extrahelper %}

{% block tab_title %} Overview {% endblock %}

{% block title %} Overview {% endblock %}

{% block js_scripts %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.13.2/js/jquery.dataTables.js"></script>
<script src="{% static 'eventowner/js/table.js' %}"></script>
<script src="{% static 'eventowner/js/overview.js' %}"></script>
{% endblock %}

{% block stylesheet_links %}
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.2/css/jquery.dataTables.css">
<link rel="stylesheet" href="{% static 'eventowner/css/overview.css' %}" />
<link rel="stylesheet" href="{% static 'eventowner/css/table.css' %}" />
{% endblock %}

{% block email %}
<span> {{UserDetails.email}}</span>
{% endblock %}

{% block introduction %}
<span> Welcome, {{UserDetails.lastName}} {{UserDetails.firstName}}</span>
{% endblock %}

{% block content %}
<div id="summary">
    <h2>Summary</h2>
    {% for countitem, labelitem in EventDetail %}
        {{labelitem}}{{countitem}} <br/>
    {% endfor %}
</div>

<div id="miscellaneous">
    <span id="links">
        <h2>Miscellaneous</h2>
        <a>User Guide</a>
        <a>Support</a>
        <a>FAQ</a>
        <a href = '/harpocryption/eventowner/about'>About</a>
    </span>

    <span id="annotation">&copy; harpocryption.com 2022</span>
</div>


<div id="vote_events">
    <span>
        <h2>Your Vote Events</h2>
        <span class="createevent_section">
            <button class="button_2 create_button" id="create_vote_event_btn" type="button" onclick="window.location.href = '/harpocryption/eventowner/createevent'">Create New Vote Event</button>
        </span>
    </span>

    <table id='votetable'>
        <thead>
            <tr class="header">
                <th>Seq No</th>
                <th>Name</th>
                <th>Event Date</th>
                <th>Event Time</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% if not VoteEvents %}
            <tr class="no_records">
                <td colspan="6">You have no Vote Event records, let's create one !</td>
            </tr>
            {% endif %}
            {% for event in VoteEvents %}
            <tr class = "table_contents">
                <td>{{forloop.counter}}</td>
                <td>{{event.eventTitle}}</td>
                <td>{{event|concat_period:'date'|linebreaks}}</td>
                <td>{{event|concat_period:'time'|linebreaks}}</td>
                <td>{{event|status_abbreviation}}</td>
                <td class="buttons_col">
                    <button class="button_2" type="button" onclick="window.location.href='/harpocryption/eventowner/viewevent/' + '{{event.eventNo}}'">View</button>
                    <form action="/harpocryption/eventowner/deleteevent/{{event.eventNo}}" method="POST">
                        {% csrf_token %}
                        <button class="button_2" type="button" onclick="display_pop_out_message_box(event, 'Do you want to delete this vote event ?')">Delete</button>
                    </form>
                    <br />
                    <button class="button_2" type="button" {% if event.status != "PC" and event.status != "PB" %} disabled {% endif %} onclick="window.location.href='/harpocryption/eventowner/updateevent/' + '{{event.eventNo}}'">Modify</button>
                    <form action="/harpocryption/eventowner/confirmevent/{{event.eventNo}}" method="POST">
                        {% csrf_token %}
                        <button class="button_2" type="button" {% if event.status != "PC" %} disabled {% endif %} onclick="display_pop_out_message_box(event, 'Are you confirmed to publish this vote event ?')">Confirm</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<span id="pop_out_message_box">
    <h3>harpocryption.com</h3>
    <p id="message_content"></p>
    <p class="buttons">
        <button class="button_3" id="cancel_btn" type="button" onclick="hide_pop_out_message_box()">Cancel</button>
        <button class="button_3" id="confirm_btn" type="button">OK</button>
    </p>
</span>
{% endblock %}